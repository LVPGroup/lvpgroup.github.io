<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory bpel_semantics (Isabelle2020: April 2020)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory bpel_semantics</h1>

<span class="command">theory</span> <span class="name">bpel_semantics</span><br/>
<span class="keyword">imports</span> <a href="bpel_ast.html"><span class="name">bpel_ast</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
Created by Yongwang Zhao (zhaoyw@buaa.edu.cn)
School of Computer Science &amp; Engineering, Beihang University, China
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Small-step semantics of BPEL v2.0 language&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>bpel_semantics</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>bpel_ast</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Definition of Small-step Semantics &#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">type_synonym</span></span><span> </span><span class="delimiter">(</span><span class="tfree">&#39;s</span><span class="delimiter">,</span><span class="tfree">&#39;l</span><span class="delimiter">)</span><span> </span><span>bpelconf</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#39;s,&#39;l) Activity &#215; (&#39;s,&#39;l) State&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">type_synonym</span></span><span> </span><span class="delimiter">(</span><span class="tfree">&#39;s</span><span class="delimiter">,</span><span class="tfree">&#39;l</span><span class="delimiter">)</span><span> </span><span>evthandlerconf</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#39;s,&#39;l) EventHandler &#215; (&#39;s,&#39;l) State&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_set</span></span><span>
</span><span>    </span><span>activity_tran</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((&#39;s,&#39;l) bpelconf &#215; (&#39;s,&#39;l) bpelconf) set&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>activity_tran&#39;</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#39;s,&#39;l) bpelconf &#8658; (&#39;s,&#39;l) bpelconf &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;_ &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> _&quot;</span></span></span><span> </span><span class="delimiter">[</span><span>81</span><span class="delimiter">,</span><span>81</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>evthandler_tran</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((&#39;s,&#39;l) evthandlerconf &#215; (&#39;s,&#39;l) bpelconf) set&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>evthandler_tran&#39;</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#39;s,&#39;l) evthandlerconf &#8658; (&#39;s,&#39;l) bpelconf &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;_ &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> _&quot;</span></span></span><span> </span><span class="delimiter">[</span><span>81</span><span class="delimiter">,</span><span>81</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;P &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> Q &#8801; (P,Q) &#8712; activity_tran&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;P &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> Q &#8801; (P,Q) &#8712; evthandler_tran&quot;</span></span></span><span>
</span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
three cases of Invoke:
(1) invoke successfully
(2) invoke returns exception which is caught
(3) invoke returns exception which is not caught
However, we assume that all exceptions will be caught.
*)</span></span></span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>invoke_suc</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;targets_sat (targets fls) s; t = fire_sources (sources fls) (spc s)&#10215;
    &#10233; (Invoke fls ptl ptt opn spc cts cta,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>invoke_fault</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;targets_sat (targets fls) s; t = fire_sources (sources fls) s;
    evh &#8712; set (map snd cts) &#8746; set_option cta&#10215;
    &#10233; (Invoke fls ptl ptt opn spc cts cta,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (evh,t)&quot;</span></span></span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
| invoke_fault_notcatch: &quot;&#10214;targets_sat (targets fls) s; t = fire_sources (sources fls) s;
    set (map snd cts) &#8746; set_option cta = {}&#10215;
    &#10233; (Invoke fls ptl ptt opn spc cts cta,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;
*)</span></span></span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>receive</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;targets_sat (targets fls) s; r = spc s; t = fire_sources (sources fls) r&#10215;
    &#10233; (Receive fls ptl ptt opn spc,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>reply</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;targets_sat (targets fls) s; t = fire_sources (sources fls) s&#10215;
    &#10233; (Reply fls ptl ptt opn,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>assign</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;targets_sat (targets fls) s; r = spc s; t = fire_sources (sources fls) r&#10215;
    &#10233; (Assign fls spc,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>wait</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;tm &gt; tick s; targets_sat (targets fls) s; t = fire_sources (sources fls) s&#10215;
    &#10233; (Wait fls tm,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>empty</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;targets_sat (targets fls) s; t = fire_sources (sources fls) s&#10215;
    &#10233; (Empty fls,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>seq</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;(P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (P&#39;,t); P&#39; &#8800; ActTerminator &#10215; &#10233; (Seqb P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Seqb P&#39; Q,t)&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>seq_fin</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;(P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&#10215; &#10233;(Seqb P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t)&quot;</span></span></span><span>
</span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
| ifT: &quot;s&#8712;c &#10233; (If c P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (P,s)&quot;
| ifF: &quot;s&#8713;c &#10233; (If c P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,s)&quot;
*)</span></span></span></span></span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* This is to work around a quirk in the semantics of PiCore *)</span></span></span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ifT</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;c &#10233; (If c P Q, s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (P, s)&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ifF</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8713;c &#10233; (If c P Q, s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q, s)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>whileT</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8712;c &#10233; P &#8800; ActTerminator &#10233; (While c P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Seqb P (While c P),s)&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>whileF</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#8713;c &#10233; (While c P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,s)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>pick1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,s)&#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub>(Q,t) &#10233; (Pick a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t)&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>pick2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(b,s)&#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub>(Q,t) &#10233; (Pick a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t)&quot;</span></span></span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*| pick: &quot;&#10214;i &lt; length ehs; (ehs!i,s) &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> (Q,t) &#10215; &#10233; (Pick ehs,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t)&quot;*)</span></span></span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>flow1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(c,t) &#10233; (Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(Flow c b,t)&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>flow2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(c,t) &#10233; (Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(Flow a c,t)&quot;</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>flow_fin</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Flow ActTerminator ActTerminator,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,s)&quot;</span></span></span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*| flow: &quot;&#10214;i &lt; length as; (as!i,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (b,t); bs = as[i := b] &#10215; &#10233; (Flow as,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Flow bs,t)&quot;
| flow_fin: &quot;&#10214;&#8704;i &lt; length as. as ! i = ActTerminator &#10215; &#10233; (Flow as,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,s)&quot;*)</span></span></span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>on_message</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;t = spc s&#10215; &#10233; (OnMessage ptl ptt opn spc a,s) &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> (a,t)&quot;</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>on_alarm</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;tm &gt; tick s&#10215; &#10233; (OnAlarm tm a,s) &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> (a,s)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Lemmas of Small-step Semantics &#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_cases</span></span><span> </span><span>bpel_recv_cases</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Receive fls ptl ptt opn spc,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">thm</span></span><span> </span><span>bpel_recv_cases</span><span>
</span><span class="keyword1"><span class="command">thm</span></span><span> </span><span>receive</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>recv_to_termi</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Receive a b c d e, s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q, t) &#10233; Q = ActTerminator&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>termi_has_no_tran</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(P,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(Q,t) &#10233; P &#8800; ActTerminator&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_cases</span></span><span> </span><span>bpel_seq</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Seqb P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (R,t)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">thm</span></span><span> </span><span>bpel_seq</span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_cases</span></span><span> </span><span>bpel_seq1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Seqb P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Seqb P&#39; Q,t)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">thm</span></span><span> </span><span>bpel_seq1</span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_cases</span></span><span> </span><span>bpel_seq_fin</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Seqb ActTerminator Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,s)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">thm</span></span><span> </span><span>bpel_seq_fin</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_seq_cases</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Seqb P Q,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (R,t) &#10233;
  R = Q &#8743; (P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t) &#8744; (&#8707;P&#39;. P&#39; &#8800; ActTerminator &#8743; (P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (P&#39;,t) &#8743; R = Seqb P&#39; Q)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_pick_cases</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Pick a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t) &#10233; (a,s)&#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub>(Q,t) &#8744; (b,s)&#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub>(Q,t)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_cases</span></span><span> </span><span>bpel_flow_case</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">thm</span></span><span> </span><span>bpel_flow_case</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_flow_cases1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Flow c d,t) &#10233;
  (a,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(c,t) &#8743; b = d &#8744; (b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(d,t) &#8743; a = c&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_flow_cases2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (ActTerminator,t) &#10233;
  a = ActTerminator &#8743; b = ActTerminator &#8743; s = t&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_flow_cases3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t) &#10233; Q = ActTerminator &#8744; (&#8707;c d. Q = Flow c d)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_flow_cases</span><span class="delimiter">:</span><span>
</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(Flow a b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t) &#10233; (&#8707;c. Q = Flow c b &#8743; (a,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(c,t))
      &#8744; (&#8707;d. Q = Flow a d &#8743; (b,s)&#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub>(d,t))
      &#8744; Q = ActTerminator &#8743; a = ActTerminator &#8743; b = ActTerminator &#8743; s = t&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_while_cases</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;(While c P,s) &#10230;<span class="hidden">&#8681;</span><sub>b</sub><span class="hidden">&#8681;</span><sub>p</sub><span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>l</sub> (Q,t) &#10233;
    s&#8712;c &#8743; Q = Seqb P (While c P) &#8743; s = t &#8743; P&#8800;ActTerminator
  &#8744; s&#8713;c &#8743; Q = ActTerminator &#8743; s = t&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>activity_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_onmsg_cases</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(OnMessage ptl ptt opn spc a,s) &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> (x,t) &#10233; x = a &#8743; t = spc s&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>evthandler_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bpel_onalarm_cases</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(OnAlarm tm a,s) &#10230;<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>h</sub> (x,t) &#10233; x = a &#8743; t = s &#8743; tm &gt; tick s&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>evthandler_tran.cases</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Constructing the BPEL process by adding a Tick &#8250;</span></span></span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* we add a parallel tick activity to simulate timer *)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>bpel_system</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#39;s,&#39;l) BPELProc &#8658; (&#39;s,&#39;l) BPELProc&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bpel_system proc &#8801; Flow (While UNIV (Assign &#10631;targets=None,sources=None&#10632; (&#955;s. s&#10631;tick := tick s + 1&#10632;))) proc&quot;</span></span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span></pre>

</div>
</body>
</html>
